# CKTAP Swift bindings

This directory contains Swift bindings generated by UniFFI and a local SwiftPM
manifest used during development.

## Local development

- Run `just build` (or `./build-xcframework.sh`) to regenerate
  `Sources/CKTap/cktap_ffi.swift` and `cktapFFI.xcframework`.
- Run `just test` to execute Swift tests.

## Publishing the Swift package

The repo root `Package.swift` is the public SwiftPM entry point. It expects a
GitHub release asset named `cktapFFI.xcframework.zip`.

### Manual

1. Build the xcframework:
   ```
   just build
   ```
2. Create the zip from `cktap-swift`:
   ```
   cd cktap-swift
   zip -r cktapFFI.xcframework.zip cktapFFI.xcframework
   ```
3. Upload the zip to the GitHub release tag.
4. Compute the checksum:
   ```
   swift package compute-checksum cktapFFI.xcframework.zip
   ```
5. Update the root `Package.swift` `tag` and `checksum`, then tag and release.

### Automated

Run the `Release Swift Package` workflow with a tag (e.g. `v0.1.1`). It builds
the xcframework, creates the zip, updates the root `Package.swift`, commits the
Swift sources, tags the release, and uploads the asset. If the workflow fails
after committing, it will not auto-revert the commit.
